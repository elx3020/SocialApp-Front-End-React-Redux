(this["webpackJsonpsocial-app"]=this["webpackJsonpsocial-app"]||[]).push([[0],{16:function(e,t,n){},26:function(e,t,n){},37:function(e,t,n){},38:function(e,t,n){},39:function(e,t,n){},47:function(e,t,n){},69:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){"use strict";n.r(t);var c=n(1),a=n.n(c),s=n(21),i=n.n(s),o=n(3),r=n(8),l=(n(47),n(6)),d=n.n(l),j=n(40),u=n(4),b=n(20),O=n(41),h=n(17),m=n(2),p="SET_AUTHENTICATED",f="SET_UNAUTHENTICATED",x="SET_USER",g="MARK_NOTIFICATIONS_READ",v="SET_ERRORS",y="LOADING_UI",N="CLEAR_ERRORS",I="LOADING_DATA",A="LOADING_COMMENTS",k="GET_POSTS",w="GET_POST",C="CLEAR_POST",S="SET_POST",T="LIKE_POST",E="UNLIKE_POST",D="DELETE_POST",R="GET_COMMENTS",Y="GET_POST_ONLY",G="SET_COMMENT",M={authenticated:!1,loading:!1,credentials:{},likes:[],notifications:[]},P={posts:[],post:{},comments:[],loading:!1,loadingComments:!1},L={loading:!1,errors:null},U=[O.a],Z=Object(b.b)({user:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case p:return Object(m.a)(Object(m.a)({},e),{},{authenticated:!0});case f:return M;case y:return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case x:return Object(m.a)({authenticated:!0,loading:!1},t.payload);case T:return Object(m.a)(Object(m.a)({},e),{},{likes:[].concat(Object(h.a)(e.likes),[{userHandle:e.credentials.handle,postId:t.payload.postId}])});case E:return Object(m.a)(Object(m.a)({},e),{},{likes:e.likes.filter((function(e){return e.postId!==t.payload.postId}))});case g:return Object(m.a)(Object(m.a)({},e),{},{notifications:e.notifications.map((function(e){return Object(m.a)(Object(m.a)({},e),{},{read:!0})}))});default:return e}},data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case k:return Object(m.a)(Object(m.a)({},e),{},{posts:t.payload,loading:!1});case w:var n=e.posts.filter((function(e){return e.postId===t.payload}));return Object(m.a)(Object(m.a)({},e),{},{post:Object.assign.apply(Object,[{}].concat(Object(h.a)(n))),loading:!1});case Y:return Object(m.a)(Object(m.a)({},e),{},{post:t.payload,loading:!1});case C:return Object(m.a)(Object(m.a)({},e),{},{post:{},comments:[]});case S:return Object(m.a)(Object(m.a)({},e),{},{posts:[t.payload].concat(Object(h.a)(e.posts)),loading:!1});case D:return Object(m.a)(Object(m.a)({},e),{},{posts:e.posts.filter((function(e){return e.postId!==t.payload})),loading:!1});case R:return Object(m.a)(Object(m.a)({},e),{},{comments:t.payload,loadingComments:!1});case G:return Object(m.a)(Object(m.a)({},e),{},{comments:[].concat(Object(h.a)(e.comments),[t.payload]),loadingComments:!1});case I:return Object(m.a)(Object(m.a)({},e),{},{loading:!0});case A:return Object(m.a)(Object(m.a)({},e),{},{loadingComments:!0});case T:case E:var c=e.posts.findIndex((function(e){return e.postId===t.payload.postId}));return e.posts[c]=t.payload,Object(m.a)({},e);default:return e}},UI:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case v:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,errors:t.payload});case N:return Object(m.a)(Object(m.a)({},e),{},{loading:!1,errors:null});case y:return Object(m.a)(Object(m.a)({},e),{},{loading:!0});default:return e}}}),B=Object(b.d)(Z,{},Object(b.c)(b.a.apply(void 0,U),window.__REDUX_DEVTOOLS_EXTENSION__&&window.__REDUX_DEVTOOLS_EXTENSION__())),F=function(){return function(e){localStorage.removeItem("FBIdToken"),delete d.a.defaults.headers.common.Authorization,e({type:f}),window.location.replace("/")}},V=function(){return function(e){d.a.get("/user").then((function(t){e({type:x,payload:t.data})})).catch((function(e){console.error(e)}))}},W=function(e){var t="Bearer ".concat(e);localStorage.setItem("FBIdToken",t),d.a.defaults.headers.common.Authorization=t},z=n(9),Q=(n(69),n(0)),X={markNotificationRead:function(e){return function(t){d.a.post("/notifications",e).then((function(){t({type:g})})).catch((function(e){return console.log(e)}))}}},J=Object(u.b)((function(e){return{notifications:e.user.notifications}}),X)((function(e){var t=Object(c.useState)(!1),n=Object(z.a)(t,2),a=n[0],s=n[1],i=e.notifications,o=i.some((function(e){return!1===e.read}))?Object(Q.jsx)("div",{className:"alert-active"}):Object(Q.jsx)("div",{}),l=i.map((function(e){var t="like"===e.type?" like your post.":" comment your post";return Object(Q.jsx)("li",{children:Object(Q.jsxs)(r.b,{style:{color:"white",textDecoration:"none"},to:"/".concat(e.recipient,"/post/").concat(e.postId),children:[e.sender," ",t]})},e.notificationId)}));return Object(Q.jsxs)("div",{children:[Object(Q.jsx)("div",{className:"notification-link",onClick:function(t){s((function(e){return!e}));var n=document.querySelector(".panel");a?(n.classList.add("panel-close"),n.classList.remove("panel-open")):(n.classList.add("panel-open"),n.classList.remove("panel-close"),i.filter((function(e){return!1===e.read})).length>0&&e.markNotificationRead(i.filter((function(e){return!1===e.read})).map((function(e){return e.notificationId}))))},children:"Notifications"}),o,Object(Q.jsx)("div",{id:"notifications-panel",className:"panel",children:Object(Q.jsx)("ul",{children:l})})]})})),H={color:"red",marginLeft:"2rem",textDecoration:"none"},K={backgroundColor:"black",height:"40px",position:"fixed",width:"100%",display:"flex",justifyContent:"center",alignItems:"center",zIndex:2},_=Object(u.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.authenticated,n=e.userhandle,c=t?Object(Q.jsxs)("div",{style:{display:"flex"},children:[Object(Q.jsx)(r.b,{to:"/",style:H,children:"Home"}),Object(Q.jsx)(r.b,{to:"/profile/".concat(n),style:H,children:"Profile"}),Object(Q.jsx)(J,{})]}):Object(Q.jsxs)("div",{children:[Object(Q.jsx)(r.b,{to:"/",style:H,children:"Home"}),Object(Q.jsx)(r.b,{to:"/login",style:H,children:"Login"}),Object(Q.jsx)(r.b,{to:"/signup",style:H,children:"Sign up"}),Object(Q.jsx)(r.b,{to:"/profile/".concat(n),style:H,children:"Profile"})]});return Object(Q.jsx)("div",{style:K,children:c})})),q=(n(16),function(e){return Object(Q.jsx)("footer",{className:"footer-format",children:"Esteban Lasso \xa9 All rights reserved"})}),$=function(e){return function(t){t({type:I}),d.a.delete("/post/".concat(e)).then((function(){t({type:D,payload:e})})).catch((function(e){console.log(e)}))}},ee=function(e){return function(t){d.a.get("/post/".concat(e,"/like")).then((function(e){t({type:T,payload:e.data})})).catch((function(e){console.log(e)}))}},te=function(e){return function(t){d.a.get("/post/".concat(e,"/unlike")).then((function(e){t({type:E,payload:e.data})})).catch((function(e){console.log(e)}))}},ne=n(15),ce=n.n(ne),ae=n(7),se=n.n(ae),ie=(n(37),n(73),n(26),function(e){var t=e.post,n=t.title,c=t.body,a=t.createdAt,s=t.userImage,i=t.userHandle,l=t.likeCount,d=t.commentCount,j=t.postId,u=e.user,b=u.authenticated,O=u.credentials,h=Object(o.g)(),m=function(){h.push("".concat(i,"/post/").concat(j))},p=b?e.user.likes&&e.user.likes.find((function(e){return e.postId===j}))?Object(Q.jsx)("button",{className:"button like",onClick:function(){e.unlikePost(j)},children:Object(Q.jsx)("i",{className:"fas fa-heart"})}):Object(Q.jsx)("button",{className:"button unlike",onClick:function(){e.likePost(j)},children:Object(Q.jsx)("i",{className:"far fa-heart"})}):Object(Q.jsx)("button",{className:"button unlike",children:Object(Q.jsx)(r.b,{to:"/login",children:Object(Q.jsx)("i",{className:"far fa-heart"})})}),f=b?i===O.handle?Object(Q.jsx)("button",{onClick:function(){e.deletePost(j)},children:"Delete"}):Object(Q.jsxs)("p",{children:["by ",i]}):Object(Q.jsx)("p",{children:Object(Q.jsxs)(r.b,{to:"/login",children:["by ",i]})});return Object(Q.jsxs)("div",{className:"card-container",children:[Object(Q.jsxs)("div",{className:"card-head",children:[Object(Q.jsx)("div",{id:"user-image",children:Object(Q.jsx)("img",{src:s,alt:"userImage"})}),Object(Q.jsx)("h3",{children:n}),Object(Q.jsx)("div",{id:"toggle",children:f})]}),Object(Q.jsxs)("div",{className:"card-content",children:[Object(Q.jsx)("p",{onClick:m,children:c}),Object(Q.jsx)("span",{children:ce()(a).format("MMM YYYY")})]}),Object(Q.jsxs)("div",{className:"card-footer",children:[Object(Q.jsxs)("div",{className:"likes-section",children:[p,Object(Q.jsx)("p",{children:l})]}),Object(Q.jsxs)("span",{onClick:m,children:[Object(Q.jsx)("i",{className:"fas fa-comments"})," Comments: ",d]})]})]})});ie.porpTypes={likePost:se.a.func.isRequired,unlikePost:se.a.func.isRequired,user:se.a.object.isRequired,post:se.a.object.isRequired};var oe={likePost:ee,unlikePost:te,deletePost:$},re=Object(u.b)((function(e){return{user:e.user}}),oe)(ie),le=(n(74),function(e){var t=e.authenticated,n=e.loading,a=e.credentials,s=a.handle,i=a.imageUrl,o=Object(c.useState)(""),l=Object(z.a)(o,2),d=l[0],j=l[1],u=Object(c.useState)(""),b=Object(z.a)(u,2),O=b[0],h=b[1],m=function(e){var t=e.target;"title"===t.name?j(t.value):"body"===t.name&&h(t.value)},p=Object(Q.jsxs)("div",{className:"feed-head-container",children:[Object(Q.jsxs)("div",{className:"feed-head-header",children:[Object(Q.jsx)("img",{src:i,alt:"user_image",style:{width:"50px",height:"auto"}}),Object(Q.jsx)("h3",{children:s})]}),Object(Q.jsxs)("form",{className:"feed-form",onSubmit:function(t){t.preventDefault();var n={title:d,body:O};""!==n.title&&""!==n.body?(e.setPost(n),j(""),h("")):window.alert("Cannot post without text.")},children:[Object(Q.jsxs)("div",{className:"form-input",children:[Object(Q.jsx)("input",{type:"text",name:"title",id:"title",placeholder:"Title:",onChange:m,value:d}),Object(Q.jsx)("textarea",{name:"body",id:"body",rows:"2",placeholder:"What is it in your mind?",onChange:m,value:O,style:{resize:"none"}})]}),Object(Q.jsxs)("div",{className:"footer-panel-head",children:[Object(Q.jsx)("i",{className:"fas fa-hamsa"}),Object(Q.jsx)("button",{className:"submit-button",type:"submit",children:"Post"})]})]})]}),f=Object(Q.jsx)("div",{className:"feed-head-no-user",children:Object(Q.jsx)(r.b,{to:"/signup",children:Object(Q.jsx)("h1",{children:"Sign In"})})});return n?Object(Q.jsx)("h1",{children:"Loading..."}):t?p:f});le.propType={authenticated:se.a.bool.isRequired,credentials:se.a.object.isRequired,setPost:se.a.func.isRequired};var de={setPost:function(e){return function(t){t({type:I}),d.a.post("/post",e).then((function(e){t({type:S,payload:e.data})})).catch((function(e){console.log(e)}))}}},je=Object(u.b)((function(e){return{authenticated:e.user.authenticated,credentials:e.user.credentials,loading:e.user.loading}}),de)(le),ue=function(){return Array.from({length:5},(function(e,t){return Object(Q.jsxs)("div",{className:"card-container",children:[Object(Q.jsxs)("div",{className:"card-head",children:[Object(Q.jsx)("div",{id:"user-image",children:Object(Q.jsx)("img",{src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADIAAAAyCAIAAACRXR/mAAABN2lDQ1BBZG9iZSBSR0IgKDE5OTgpAAAokZWPv0rDUBSHvxtFxaFWCOLgcCdRUGzVwYxJW4ogWKtDkq1JQ5ViEm6uf/oQjm4dXNx9AidHwUHxCXwDxamDQ4QMBYvf9J3fORzOAaNi152GUYbzWKt205Gu58vZF2aYAoBOmKV2q3UAECdxxBjf7wiA10277jTG+38yH6ZKAyNguxtlIYgK0L/SqQYxBMygn2oQD4CpTto1EE9AqZf7G1AKcv8ASsr1fBBfgNlzPR+MOcAMcl8BTB1da4Bakg7UWe9Uy6plWdLuJkEkjweZjs4zuR+HiUoT1dFRF8jvA2AxH2w3HblWtay99X/+PRHX82Vun0cIQCw9F1lBeKEuf1UYO5PrYsdwGQ7vYXpUZLs3cLcBC7dFtlqF8hY8Dn8AwMZP/fNTP8gAAAAJcEhZcwAACxMAAAsTAQCanBgAAATpaVRYdFhNTDpjb20uYWRvYmUueG1wAAAAAAA8P3hwYWNrZXQgYmVnaW49Iu+7vyIgaWQ9Ilc1TTBNcENlaGlIenJlU3pOVGN6a2M5ZCI/PiA8eDp4bXBtZXRhIHhtbG5zOng9ImFkb2JlOm5zOm1ldGEvIiB4OnhtcHRrPSJBZG9iZSBYTVAgQ29yZSA1LjYtYzE0MiA3OS4xNjA5MjQsIDIwMTcvMDcvMTMtMDE6MDY6MzkgICAgICAgICI+IDxyZGY6UkRGIHhtbG5zOnJkZj0iaHR0cDovL3d3dy53My5vcmcvMTk5OS8wMi8yMi1yZGYtc3ludGF4LW5zIyI+IDxyZGY6RGVzY3JpcHRpb24gcmRmOmFib3V0PSIiIHhtbG5zOnhtcD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wLyIgeG1sbnM6ZGM9Imh0dHA6Ly9wdXJsLm9yZy9kYy9lbGVtZW50cy8xLjEvIiB4bWxuczpwaG90b3Nob3A9Imh0dHA6Ly9ucy5hZG9iZS5jb20vcGhvdG9zaG9wLzEuMC8iIHhtbG5zOnhtcE1NPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvbW0vIiB4bWxuczpzdEV2dD0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL3NUeXBlL1Jlc291cmNlRXZlbnQjIiB4bXA6Q3JlYXRvclRvb2w9IkFkb2JlIFBob3Rvc2hvcCBDQyAoV2luZG93cykiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTA4LTIwVDE1OjMwOjIxKzAyOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wOS0yN1QxNjozNjowOCswMjowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wOS0yN1QxNjozNjowOCswMjowMCIgZGM6Zm9ybWF0PSJpbWFnZS9wbmciIHBob3Rvc2hvcDpDb2xvck1vZGU9IjMiIHhtcE1NOkluc3RhbmNlSUQ9InhtcC5paWQ6Yjk1Yjk0NTYtMTRjYS1lNDRjLTllNTUtZDcyMTA2YTlkMTI5IiB4bXBNTTpEb2N1bWVudElEPSJ4bXAuZGlkOmI5NWI5NDU2LTE0Y2EtZTQ0Yy05ZTU1LWQ3MjEwNmE5ZDEyOSIgeG1wTU06T3JpZ2luYWxEb2N1bWVudElEPSJ4bXAuZGlkOmI5NWI5NDU2LTE0Y2EtZTQ0Yy05ZTU1LWQ3MjEwNmE5ZDEyOSI+IDx4bXBNTTpIaXN0b3J5PiA8cmRmOlNlcT4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNyZWF0ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6Yjk1Yjk0NTYtMTRjYS1lNDRjLTllNTUtZDcyMTA2YTlkMTI5IiBzdEV2dDp3aGVuPSIyMDIxLTA4LTIwVDE1OjMwOjIxKzAyOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgQ0MgKFdpbmRvd3MpIi8+IDwvcmRmOlNlcT4gPC94bXBNTTpIaXN0b3J5PiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94cGFja2V0IGVuZD0iciI/PklUTd4AAAT4SURBVFiF7ZnXchs3FIbRt5JUsSVbVrNjK5Ezzkze/xEy4xSXRI76SFRl2w4sgJMLJhpLpiWCkhxf+J+93F18xJ7yHxAftI/Q1yfyfwOM1jcsF33DctE3LBexO3kL/lfIWgCA27/wtlhCCM6o1qbW2lpgjHHOrLVSKmstxviLYgGAEFxw0e33O91emmVSKQSIMRZF4czU1MPZGYRQWVWTkeEJmg8AhEGg6npze7d9cqKUIphQShDC1lpjDGV0dmZ67dnTqVYrL4ovgQUAYRjkefn6zdt+fxCGAaf042jCCFmAoigZZz+9XF94ND8BmVsmAkDge2VZ/fLrb2mStpoNdpkJIQQIYYzjOEIIvf7jzfHpaRgGrnnghkUpRQi/+2sjy4s4jq5ZDAB8z6OUvnm/kWW573n3hQUIBb53cHR0cnbeuJbpgizw/bIqt/f2GXPLLQcsirGq6/bxCaV0zPwaJsfp2Xm31xNC3AsWF6LfT9I08zxv/FhhjEqpOr0ed9kwByxGSZrnda2JSykCQISQNMu11uPXMAcsCyClRO7VkVIiparvC8uCMQZPwIWxtdapFzlgEYwxIYDcOzEgTDBGGI39rBuW4HwCf2Ct5YwxRq29BywLEAYBJQS5oGGMjDVhGHLOx89fByxV11OtZhD4Suvxn7IWEUKmWy2n/uOAZYyJo2juwayUaszgxRhXVTXdaj2YnZFK3QsWQkjV9crSYhSGYxopY4yxdmVpkTNmjLk3LKWiMFhfe661VnV9PRkApFn+bGV5YX7e1Q+6YWGMi6JceDT/6uW6lLIsRy+GMdZap2m2urz4w4vvZK2stU4LOZtmC6goy9WlRU+Ijc3NJM04Z5zzYUcCAG2MkkoIvv79i+dPV7Ux9U37+qkmMc1DRWFQSdU+Pu72BmVVWWsBgBDiCd5sNh/PzU1PNctKOrXCybEwxpwxxtgw4THGaZYnaVpJiRBwLhpx1Go2KKHDbmOMUXXt6k7H/YgAwDnzhKe1TrN8kCZZVhRlKaW0AGQ4JSIECIG1CGNPiCDw4zBsNZuNRiw4V7VStR5z327eLQDgjPm+nxfFydl5p9tNkqyUFQJEKKGUXjBd3A8AxthhRfA80WjEs9PT8w8fNBsNqZRSN5e9m7GiMFCq3j9st4+OkzQjhAjBKaXj/WxkrVWq1kbHUfR4fm558UkYBEVZXm8oPosFAIwx3/dOT88/bG13+wNPcCfje2kZjJWqK1k14njt2dMnC4+VUtdUvtFYAMA5F5xv7ux+2NrGGIe+f/ujBYxxVcla16vLSy/XXgx95UiyESE/jG7B2ds/N3b29sMwuMi7WwoAfN/jhm3v7leV/PnVj54QclSojajyhBBPeO8/bG7v7cVxdFdMF2SEkGYjPjo5+f3de0rpyFntKtZwhNo/PNza2Y2jCGN8h0wfqxHHB+3jze0d3x8x2V7F8oTI8/zvrR1PiPHTbTKFYbC1t9/p9D6dua9icc73Dtp5UToNg5OJM6a12T88xOTa2KKUZnlx1ul4nrhvJvTfQUun2+v1EyH4Z7EE54MkKYqSMwaAvsBFKa2k7A8GnF3CupQFlJIkTbOimGAWnFhVJQdJcuXjXCqnjNJBkqZ5xujdHPWOI2ON7/vTrdbHVvESlrXWE0IIYcHNTN5GBJNa11fGlku7Qgipta5d5q270pVC/5X+XfCVYv0DOjAXvBey7REAAAAASUVORK5CYII=",alt:"userImage"})}),Object(Q.jsx)("div",{className:"fill-bar"}),Object(Q.jsx)("div",{id:"toggle"})]}),Object(Q.jsxs)("div",{className:"card-content",children:[Object(Q.jsx)("div",{className:"fill-bar"}),Object(Q.jsx)("div",{className:"fill-bar short"}),Object(Q.jsx)("div",{className:"fill-bar short"}),Object(Q.jsx)("div",{className:"fill-bar content"})]}),Object(Q.jsxs)("div",{className:"card-footer",children:[Object(Q.jsx)("div",{className:"likes-section",children:Object(Q.jsxs)("p",{children:[Object(Q.jsx)("i",{className:"fas fa-heart"})," 0"]})}),Object(Q.jsxs)("span",{children:[Object(Q.jsx)("i",{className:"fas fa-comments"})," Comments: 0"]})]})]},t)}))},be={display:"flex",width:"100%"},Oe=Object(u.b)((function(e){return{data:e.data}}),{getPosts:function(){return function(e){e({type:I}),d.a.get("/posts").then((function(t){e({type:k,payload:t.data})})).catch((function(t){e({type:k,payload:[]})}))}}})((function(e){Object(c.useEffect)((function(){e.getPosts()}),[]);var t=e.data,n=t.posts,a=t.loading?Object(Q.jsx)(ue,{}):n.map((function(e){return Object(Q.jsx)(re,{post:e},e.postId)}));return Object(Q.jsx)("div",{className:"page-container",children:Object(Q.jsx)("div",{className:"div-content",children:Object(Q.jsxs)("div",{style:be,children:[Object(Q.jsx)("div",{className:"left",style:{flex:"1"}}),Object(Q.jsxs)("div",{className:"post-container center",style:{flex:"1.5"},children:[Object(Q.jsx)(je,{}),a]}),Object(Q.jsx)("div",{className:"right",style:{flex:"1"}})]})})})})),he=(n(38),{loginUser:function(e,t){return function(n){n({type:y}),d.a.post("/login",e).then((function(e){W(e.data.token),n(V()),n({type:N}),t.push("/")})).catch((function(e){n({type:v,payload:e.response.data})}))}}}),me=Object(u.b)((function(e){return{user:e.user,UI:e.UI}}),he)((function(e){var t=Object(c.useState)(""),n=Object(z.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),r=Object(z.a)(i,2),l=r[0],d=r[1],j=Object(o.g)(),u=function(e){var t=e.target;"email"===t.name?s(t.value):"password"===t.name&&d(t.value)},b=e.UI.loading;return Object(Q.jsx)("div",{children:Object(Q.jsxs)("div",{className:"page-container",children:[Object(Q.jsx)("header",{className:"header-format",children:Object(Q.jsx)("h1",{children:"Login Page"})}),Object(Q.jsx)("div",{children:Object(Q.jsx)("div",{className:"div-content",children:Object(Q.jsxs)("form",{id:"login form",className:"form-format",onSubmit:function(t){t.preventDefault();var n={email:a,password:l};e.loginUser(n,j)},children:[Object(Q.jsx)("h2",{className:"form-title",children:"Log in:"}),Object(Q.jsx)("label",{htmlFor:"email"}),Object(Q.jsx)("input",{className:"input-format",type:"email",id:"email",name:"email",placeholder:"Email:",value:a,onChange:u}),Object(Q.jsx)("label",{htmlFor:"password"}),Object(Q.jsx)("input",{className:"input-format",type:"password",id:"password",name:"password",placeholder:"Password:",value:l,onChange:u}),Object(Q.jsx)("div",{className:"buttons-div",children:Object(Q.jsx)("button",{className:"button-format",type:"submit",disabled:b,children:"Login"})})]})})})]})})})),pe={signUpUser:function(e,t){return function(n){n({type:y}),d.a.post("/signUp",e).then((function(e){W(e.data.token),n(V()),n({type:N}),t.push("/")})).catch((function(e){n({type:v,payload:e.response.data})}))}}},fe=Object(u.b)((function(e){return{user:e.user,UI:e.UI}}),pe)((function(e){var t=Object(c.useState)(""),n=Object(z.a)(t,2),a=n[0],s=n[1],i=Object(c.useState)(""),r=Object(z.a)(i,2),l=r[0],d=r[1],j=Object(c.useState)(""),u=Object(z.a)(j,2),b=u[0],O=u[1],h=Object(c.useState)(""),m=Object(z.a)(h,2),p=m[0],f=m[1],x=Object(o.g)(),g=function(e){var t=e.target;"email"===t.name?s(t.value):"password"===t.name?O(t.value):"confirmedPassword"===t.name?d(t.value):"handle"===t.name&&f(t.value)},v=e.UI.loading;return Object(Q.jsx)("div",{children:Object(Q.jsxs)("div",{className:"page-container",children:[Object(Q.jsx)("header",{className:"header-format",children:Object(Q.jsx)("h1",{children:"Sign Up"})}),Object(Q.jsx)("div",{className:"div-content",children:Object(Q.jsxs)("form",{className:"form-format",id:"signin-form",onSubmit:function(t){t.preventDefault();var n={email:a,password:b,confirmPassword:l,handle:p};e.signUpUser(n,x)},children:[Object(Q.jsx)("h2",{className:"form-title",children:"Sign In:"}),Object(Q.jsx)("label",{htmlFor:"email"}),Object(Q.jsx)("input",{className:"input-format",type:"email",id:"email",name:"email",placeholder:"Email:",value:a,onChange:g}),Object(Q.jsx)("label",{htmlFor:"password"}),Object(Q.jsx)("input",{className:"input-format",type:"password",id:"password",name:"password",placeholder:"Password:",value:b,onChange:g}),Object(Q.jsx)("label",{htmlFor:"confirmedPassword"}),Object(Q.jsx)("input",{className:"input-format",type:"password",id:"confirmedPassword",name:"confirmedPassword",placeholder:"Confirm Password:",value:l,onChange:g}),Object(Q.jsx)("label",{htmlFor:"handle"}),Object(Q.jsx)("input",{className:"input-format",type:"text",id:"handle",name:"handle",placeholder:"handle:",value:p,onChange:g}),Object(Q.jsx)("div",{className:"buttons-div",children:Object(Q.jsx)("button",{className:"button-format    ",type:"submit",disabled:v,children:"Sign in"})})]})})]})})})),xe=(n(39),{editUserData:function(e){return function(t){t({type:y}),d.a.post("/user",e).then((function(){t(V())})).catch((function(e){return console.log(e)}))}}}),ge=Object(u.b)((function(e){return{loading:e.user.loading}}),xe)((function(e){var t=e.userLocation,n=e.userWebsite,c=e.userBio;return Object(Q.jsx)("div",{children:Object(Q.jsxs)("form",{className:"profile-body body-form",onSubmit:function(a){a.preventDefault();var s={bio:c,website:n,location:t};e.editUserData(s),e.toggleEdit()},children:[Object(Q.jsx)("p",{children:"Location: "}),Object(Q.jsx)("input",{type:"text",name:"location",value:t,onChange:e.handleEditData}),Object(Q.jsx)("p",{children:"Website:"}),Object(Q.jsx)("input",{type:"text",name:"website",value:n,onChange:e.handleEditData}),Object(Q.jsx)("p",{children:"Bio:"}),Object(Q.jsx)("textarea",{id:"bio",name:"bio",rows:"3",cols:"20",style:{resize:"none"},value:c,onChange:e.handleEditData}),Object(Q.jsxs)("div",{className:"buttons-bar",children:[Object(Q.jsx)("button",{className:"button btn-profile",type:"submit",children:"Save"}),Object(Q.jsx)("button",{className:"button btn-profile",onClick:e.toggleEdit,children:"Cancel"})]})]})})})),ve={logoutUser:F,uploadImage:function(e){return function(t){t({type:y}),d.a.post("/user/image",e).then((function(){t(V())})).catch((function(e){return console.log(e)}))}}},ye=Object(u.b)((function(e){return{credentials:e.user.credentials,authenticated:e.user.authenticated,loading:e.user.loading}}),ve)((function(e){var t=e.credentials,n=t.handle,a=t.createAt,s=t.location,i=t.website,o=t.bio,r=t.imageUrl,l=e.authenticated,d=e.loading,j=Object(c.useState)(""),u=Object(z.a)(j,2),b=u[0],O=u[1],h=Object(c.useState)(""),m=Object(z.a)(h,2),p=m[0],f=m[1],x=Object(c.useState)(""),g=Object(z.a)(x,2),v=g[0],y=g[1],N=Object(c.useState)(!1),I=Object(z.a)(N,2),A=I[0],k=I[1],w=function(){k((function(e){return!e})),void 0!==s&&O(s),void 0!==i&&f(i),void 0!==o&&y(o)},C=d?Object(Q.jsx)("h2",{children:"Loading.."}):Object(Q.jsxs)("div",{className:"profile-head",children:[Object(Q.jsx)("div",{children:Object(Q.jsx)("img",{src:r,alt:"user_image",style:{width:"80px",height:"auto"}})}),Object(Q.jsx)("input",{type:"file",id:"imageInput",hidden:"hidden",onChange:function(t){var n=t.target.files[0],c=new FormData;c.append("image",n,n.name),e.uploadImage(c)}}),Object(Q.jsx)("button",{onClick:function(){document.getElementById("imageInput").click()},children:Object(Q.jsx)("i",{className:"fas fa-user-edit"})}),Object(Q.jsx)("h2",{children:"@".concat(n)})]}),S=Object(Q.jsxs)("div",{className:"profile-body",children:[Object(Q.jsxs)("p",{children:["Joined ",ce()(a).format("MMM YYYY")]}),s&&Object(Q.jsxs)("p",{children:["- ",s," -"]}),i&&Object(Q.jsx)("a",{href:i,children:i}),o&&Object(Q.jsx)("p",{children:o}),Object(Q.jsxs)("div",{className:"buttons-bar",children:[Object(Q.jsx)("button",{className:"button btn-profile",onClick:w,children:"Edit Profile"}),Object(Q.jsx)("button",{className:"button btn-profile",onClick:function(){e.logoutUser()},children:"Log out"})]})]}),T=Object(Q.jsx)("div",{className:"profileuser-container",children:l&&!d?Object(Q.jsx)(c.Fragment,{children:A?Object(Q.jsx)(ge,{userLocation:b,userWebsite:p,userBio:v,toggleEdit:w,handleEditData:function(e){var t=e.target;"location"===t.name?O(t.value):"website"===t.name?f(t.value):"bio"===t.name&&y(t.value)}}):Object(Q.jsxs)("div",{children:[C,S]})}):Object(Q.jsx)("h1",{children:"No user"})});return Object(Q.jsx)("div",{className:"page-container",children:Object(Q.jsx)("div",{className:"div-content",children:T})})})),Ne={display:"flex",flexDirection:"row",alignItems:"center",justifyContent:"space-between"},Ie={backgroundColor:"white",color:"black",padding:"1rem",border:"1px solid gray"},Ae={marginTop:"1rem"},ke={display:"flex",justifyContent:"space-between"},we=function(e){var t=e.post,n=t.title,c=t.body,a=t.createdAt,s=t.userImage,i=t.userHandle,o=t.likeCount,l=t.commentCount,d=t.postId,j=e.user,u=j.authenticated,b=j.credentials,O=u?e.user.likes&&e.user.likes.find((function(e){return e.postId===d}))?Object(Q.jsx)("button",{onClick:function(){e.unlikePost(d)},children:"Unlike"}):Object(Q.jsx)("button",{onClick:function(){e.likePost(d)},children:"Like"}):Object(Q.jsx)("button",{children:Object(Q.jsx)(r.b,{to:"/login",children:"Like"})}),h=u?i===b.handle?Object(Q.jsx)("button",{onClick:function(){e.deletePost(d)},children:"Delete"}):Object(Q.jsxs)("p",{children:["by ",i]}):Object(Q.jsx)("p",{children:Object(Q.jsxs)(r.b,{to:"/login",children:["by ",i]})});return Object(Q.jsxs)("div",{style:Ie,children:[Object(Q.jsxs)("div",{style:Ne,children:[Object(Q.jsx)("img",{src:s,alt:"userImage",style:{width:"50px",height:"auto"}}),Object(Q.jsx)("h2",{children:n}),h]}),Object(Q.jsxs)("div",{className:"content",style:Ae,children:[Object(Q.jsx)("p",{children:c}),Object(Q.jsx)("span",{style:{fontSize:"0.8rem"},children:ce()(a).format("MMM YYYY")})]}),Object(Q.jsxs)("div",{className:"post-footer",style:ke,children:[O,Object(Q.jsxs)("span",{children:["likes ",o]}),Object(Q.jsxs)("span",{children:["comments ",l]})]})]})};we.porpTypes={likePost:se.a.func.isRequired,unlikePost:se.a.func.isRequired,user:se.a.object.isRequired,post:se.a.object.isRequired};var Ce={likePost:ee,unlikePost:te,deletePost:$},Se=Object(u.b)((function(e){return{user:e.user}}),Ce)(we),Te={display:"flex",flexDirection:"row",alignItems:"center"},Ee=function(e){var t=e.comment,n=t.userHandle,c=t.body,a=t.createdAt,s=t.userImage;return Object(Q.jsxs)("div",{className:"comment-container",style:{backgroundColor:"white",color:"black"},children:[Object(Q.jsxs)("div",{className:"header",style:Te,children:[Object(Q.jsx)("img",{src:s,alt:n,style:{width:"50px",height:"auto"}}),Object(Q.jsx)("h3",{style:{marginLeft:"1rem"},children:n})]}),Object(Q.jsx)("div",{children:c}),Object(Q.jsx)("span",{children:ce()(a).format("MMM YYYY")})]})},De={postComment:function(e,t){return function(n){n({type:A}),d.a.post("/post/".concat(e,"/comment"),t).then((function(e){n({type:G,payload:e.data})})).catch((function(e){return console.log(e)}))}}},Re=Object(u.b)((function(e){return{userImage:e.user.credentials.imageUrl}}),De)((function(e){var t=Object(c.useState)(""),n=Object(z.a)(t,2),a=n[0],s=n[1],i=e.postId;return Object(Q.jsxs)("div",{children:[Object(Q.jsx)("img",{src:"",alt:""}),Object(Q.jsxs)("form",{onSubmit:function(t){t.preventDefault();var n={body:a};e.postComment(i,n),s("")},children:[Object(Q.jsx)("label",{htmlFor:"comment"}),Object(Q.jsx)("input",{type:"text",name:"comment",id:"comment",placeholder:"Write a comment...",onChange:function(e){var t=e.target;"comment"===t.name&&s(t.value)},value:a}),Object(Q.jsx)("button",{type:"submit",children:"Comment!"})]})]})})),Ye={display:"flex",alignItems:"center",width:"60%"},Ge={backgroundColor:"black",padding:"10px"},Me={getPost:function(e){return function(t){t({type:I}),t({type:C}),t({type:w,payload:e})}},getComments:function(e){return function(t){t({type:A}),d.a.get("/post/details/".concat(e)).then((function(e){t({type:R,payload:e.data})})).catch((function(e){return console.log(e)}))}},getOnlyPost:function(e){return function(t){t({type:I}),d.a.get("/post/".concat(e)).then((function(e){t({type:Y,payload:e.data})})).catch((function(e){return console.log(e)}))}}},Pe=Object(u.b)((function(e){return{loadingComments:e.data.loadingComments,loading:e.data.loading,post:e.data.post,comments:e.data.comments}}),Me)((function(e){var t=Object(o.h)().post_handle,n=e.post,a=e.loading,s=e.loadingComments,i=e.comments;Object(c.useEffect)((function(){n&&0===Object.keys(n).length&&n.constructor===Object||n.postId!==t?(e.getOnlyPost(t),e.getComments(t)):(e.getPost(t),e.getComments(t))}),[t]);var r=a?Object(Q.jsx)("h1",{children:"Loading..."}):Object(Q.jsx)(Se,{post:n},n.postId),l=s?Object(Q.jsx)("h1",{children:"Loading Comments..."}):!0===!i.length?Object(Q.jsx)("h1",{children:"No comments yet.."}):i.map((function(e){return Object(Q.jsx)(Ee,{comment:e},e.createdAt)}));return Object(Q.jsx)("div",{className:"page-container",children:Object(Q.jsx)("div",{className:"div-content",children:Object(Q.jsx)("div",{style:Ye,children:Object(Q.jsxs)("div",{className:"post-container center",style:{flex:"2"},children:[r,Object(Q.jsx)("div",{style:Ge,children:l}),Object(Q.jsx)("div",{children:Object(Q.jsx)(Re,{postId:t})})]})})})})})),Le=n(42),Ue=["component","authenticated"],Ze=Object(u.b)((function(e){return{authenticated:e.user.authenticated}}))((function(e){var t=e.component,n=e.authenticated,c=Object(Le.a)(e,Ue);return Object(Q.jsx)(o.b,Object(m.a)(Object(m.a)({},c),{},{render:function(e){return!0===n?Object(Q.jsx)(o.a,{to:"/"}):Object(Q.jsx)(t,Object(m.a)({},e))}}))})),Be=localStorage.FBIdToken;(d.a.defaults.baseURL="https://us-central1-contratofacil-2df81.cloudfunctions.net/api",Be)&&(1e3*Object(j.a)(Be).exp<Date.now()?B.dispatch(F()):(B.dispatch({type:p}),d.a.defaults.headers.common.Authorization=Be,B.dispatch(V())));var Fe=Object(Q.jsxs)(o.d,{children:[Object(Q.jsx)(o.b,{exact:!0,path:"/",children:Object(Q.jsx)(Oe,{})}),Object(Q.jsx)(Ze,{path:"/login",component:me}),Object(Q.jsx)(Ze,{path:"/signup",component:fe}),Object(Q.jsx)(o.b,{path:"/profile/:handle",component:ye}),Object(Q.jsx)(o.b,{path:"/:user_handle/post/:post_handle",component:Pe})]});var Ve=function(){return Object(Q.jsx)("div",{children:Object(Q.jsx)(u.a,{store:B,children:Object(Q.jsxs)(r.a,{children:[Object(Q.jsx)(_,{}),Fe,Object(Q.jsx)(q,{})]})})})},We=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,76)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,s=t.getLCP,i=t.getTTFB;n(e),c(e),a(e),s(e),i(e)}))};i.a.render(Object(Q.jsx)(a.a.StrictMode,{children:Object(Q.jsx)(Ve,{})}),document.getElementById("root")),We()}},[[75,1,2]]]);
//# sourceMappingURL=main.d11ba7cc.chunk.js.map